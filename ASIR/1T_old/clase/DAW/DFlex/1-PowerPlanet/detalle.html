<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PowerPlanet</title>
    <link rel="stylesheet" href="css/detalle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">
</head>
<body>
    <header>
        <div id="menu">
            <i class="fa-solid fa-bars"></i>
        </div>
        <figure>
            <img src="img/logo.png" alt="Logo PowerPlanet">    
        </figure>
        <form>
            <input type="search" placeholder="Buscar...">
        </form>
        <nav>
            <a href="#">Ofertas Limitadas</a>
            <a href="#">Contactanos</a>
            <a href="#">ES</a>
        </nav>
        <div id="carrito"> 
            <i class="fa-solid fa-cart-shopping"></i>
            <i class="fa-solid fa-user"></i>
        </div>
    </header> 
    <main>
        <nav id="breadcrumb">
            <a href=#>
                <i class="fa-solid fa-house"></i>
            </a> &gt;  
            <a href="http://127.0.0.1:5501/DAW/DFlex/1-PowerPlanet/index.html">Smartphones</a> &gt;
            <a href="#">Moviles</a> &gt;
            <a href="#">One Plus 13</a>
        </nav>
       
        <figure id="thumbnails">
            <img src="https://www.powerplanetonline.com/cdnassets/cubot_kingkong_x_12gb_512gb_negro_01_l.jpg" alt="Vista 1">
            <img src="https://www.powerplanetonline.com/cdnassets/cubot_kingkong_x_12gb_256gb_negro_02_ad_l.jpg" alt="Vista 2">
            <img src="https://www.powerplanetonline.com/cdnassets/cubot_kingkong_x_12gb_256gb_negro_03_ad_l.jpg" alt="Vista 3">
            <img src="https://www.powerplanetonline.com/cdnassets/cubot_kingkong_x_12gb_256gb_negro_04_ad_l.jpg" alt="Vista 4">
            <img src="https://www.powerplanetonline.com/cdnassets/cubot_kingkong_x_12gb_256gb_negro_05_ad_l.jpg" alt="Vista 4">
            
        </figure>
        <figure id="portada">
            <div class="badges">
                <div class="badge-friday">FRESH FRIDAY</div>
                <div class="badge-envio">Env√≠o gratis</div>
            </div>
            <img  id="foto"
                  src="https://www.powerplanetonline.com/cdnassets/cubot_kingkong_x_12gb_512gb_negro_01_l.jpg" alt="Cubot KingKong X">
        </figure>
        <article id="caracteristicas">
            <h1 id="nombre">Cubot KingKong X 16GB/256GB Negro</h1>
            <div class="valoraciones">
                <span class="star">
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                    <i class="fa-solid fa-star"></i>
                </span>
                <span class="nvaloraciones">5</span>
                <span class="comentarios">(3 opiniones)</span>
            </div>
            <div class="price-section">
                <span id="dto" class="descuento">-35%</span>
                <span class="pvr">284,99‚Ç¨</span>
            </div>
            <div>
                <p class="pvp">Precio recomendado: 439,00‚Ç¨</p>
                <p style="color: #999; font-size: 13px;">Los precios incluyen IVA</p>
            </div>

            <a href="#" class="brand">CUBOT</a>
            <p style="color: #666; font-size: 13px;">REF: CUBOT-KINGKONGX-16GB-256GB</p>

            <div class="availability">
                <div class="icon-delivery">üöö</div>
                <div class="availability-info">
                    <strong>Disponibilidad: ¬°En stock! Rec√≠belo ma√±ana Mi√©rcoles, 26 Nov.</strong>
                    <span>Env√≠o : ¬°Gratis!</span>
                    <span>Devoluci√≥n Gratis: Hasta 8 de Febrero</span>
                    <span>Garant√≠a: 3 a√±os</span>
                </div>
            </div>
        </article>
     
       
    </main>
</body>

<script>
    

    // 1-. Obtener los parametros de la URL
    const urlParmans = new URLSearchParams(window.location.search);
    // 2-. Obtener el parametro 'id'
    const idProd = parseInt(urlParmans.get('id'))
    //comprobar que el id llega al detalle.html a traves de la URL
    console.log ("--->", idProd)

     fetch('./data/productos.json')
        .then(response => response.json())
        .then ( productos => {
            //buscar producto en array productos
            const producto = productos.find(p => p.id === idProd)
            
            console.log("-1->",producto)
            console.log("-2->", producto.nombre, producto.precio)
           
           
            // aActualiza nombre
            document.getElementById('nombre').textContent = producto.nombre;
            document.getElementById('dto').textContent = `- ${producto.descuento}  %`;
            
            //cambiar portada
            document.getElementById('foto').setAttribute("src", producto.imagen);

            // **** galeria dinamica ****
            
            const galeria = document.getElementById('thumbnails');
            galeria.innerHTML='';
            producto.galeria.forEach(img => {
                let imagen = document.createElement('img');
                imagen.setAttribute("src", img)
                galeria.appendChild(imagen)
            })
        })

       
</script>