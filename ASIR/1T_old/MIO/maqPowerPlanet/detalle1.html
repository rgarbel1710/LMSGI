<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Detalle Producto - PowerPlanet</title>
<link rel="stylesheet" href="css/detalle.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <header>
        <div id="menu">
            <i class="fa-solid fa-bars"></i>
        </div>

        <figure>
            <img src="imagen/logo.png" alt="Logo">
        </figure>

    <form>
        <input type="search" placeholder="Buscar...">
    </form>

    <nav>
        <a href="#">Ofertas limitadas</a>
        <a href="#">Contáctanos</a>
        <a a href="#">ES</a>
    </nav>

    <div id="carrito">
        <i class="fa-solid fa-user"></i>
        <i class="fa-solid fa-cart-shopping"></i>
    </div>
</header>

<main>
    <nav class="home">
        <a href="index.html">
            <i class="fa-solid fa-house"></i>
        </a>
        <a href="#">
            <span>Home > Informatica > Ordenadores > Portátiles</span>
        </a>
    </nav>

   <!--Miniaturas-->
    <figure class="galeria">
        <img id="imagen-galeria" src="imagen/mac1.jpg" alt="Mini 1">
        <img id="imagen-galeria" src="imagen/mac2.jpg" alt="Mini 2">
        <img id="imagen-galeria" src="imagen/mac3.jpg" alt="Mini 3">
    </figure>

     <!--Imagen principal-->

    <figure class="col-imagen-principal">
        <div class="etiqueta">
            <h2>FRESH</h2>
            <h2 class="titulo-friday">FRIDAY</h2>
        </div>
        <img id="imagen-principal" src="imagen/mac1.jpg" alt="Producto">
    </figure>

      <!--Detalles-->
    <article class="col-detalles">

        <h1 id="nombre-producto"></h1>

        <div class="valoraciones">
        <span class="stars">
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
        </span>
        <span class="calificacion" id="calificacion"></span>
        <span class="opiniones" id="opiniones"></span>
    </div>

    <div class="precio-block">
        <span class="etiqueta-dto" id="descuento"></span>
        <span class="precio-original" id="precio-original"></span>
        <span class="precio-grande" id="precio-final"></span>
    </div>
    <p class="precio-mini">
        Precio recomendado: 
        <span id="precio-tachado"></span> 
        <span>(i)</span>
    </p>
    <p class="precio-mini iva-texto">Los precios incluyen IVA</p>
 
      <!--Stock-->
    <div class="caja-stock">
        <div class="fila-stock">
            <div class="icono-circulo">
            <i class="fa-solid fa-truck"></i>
            </div>
    
            <p class="texto-disponibilidad">
                Disponibilidad: 
            <span class="texto-en-stock">¡En stock! Recíbelo mañana Jueves</span>
            </p>
        </div>
    </div>
   
    <div class="fila-stock">
        <div class="icono-circulo">
            <i class="fa-solid fa-box-open"></i>
    </div>

    <div>
        <p class="envio-texto">
            Envío: <span class="envio-gratis">¡Gratis!</span>
        </p>
    
    </div>

    </div>
        <div class="texto-extra">
        Devolución Gratis: Hasta 8 de Febrero <br> 
        Garantía: 1 año
        </div>
    </div>

      <!--Banner-->

    <div class="banner-negro">
        <span>Ya disponible nuestro <strong>FRESH FRIDAY</strong> </span>
        <button>VER OFERTAS </button>
    </div>

      <!--Opcciones-->

    <div class="selectores-area">

        <p>Capacidad: <strong id="Capacidad"></strong></p>

        <div class="botones-opciones">
            <button class="btn-opcion active" id="256GB">256GB</button>
            <button class="btn-opcion" id="512GB">512GB</button>
        </div>

    <p>Color: </p>
    <div class="botones-opciones">
        <button class="btn-opcion">Plata Estado Excelente</button>
        <button class="btn-opcion active">Azul Pacífico Estado Excelente</button>
        <button class="btn-opcion">Oro Estado Excelente</button>
    </div>
    </div>

      <!--Compra-->

    <div class="area-compra">
        <input type="number" id="cantidad" value="1" min="1"> <!--permite poner un numero, valor inicial 1, minimo 1-->
        <button class="btn-comprar">¡COMPRAR AHORA!</button>
    </div>

    <div class="links-bajos">
        <a href="#">
            <i class="fa-regular fa-bookmark"></i> Guardar</a>
        <a href="#">
            <i class="fa-solid fa-share-nodes"></i> Compartir</a>
    </div>

    </article>
</main>
<script>
function generarEstrellas(valoracion) {
    let html = "";
    for (let i = 1; i <= 5; i++) {
        html += i <= Math.round(valoracion)
            ? '<i class="fa-solid fa-star"></i>'
            : '<i class="fa-regular fa-star"></i>';
    }
    return html;
}

// 1. Obtener ID del producto desde URL
const urlParams = new URLSearchParams(window.location.search);
const idProd = parseInt(new URLSearchParams(window.location.search).get('codigo'));

console.log("ID recibido:", idProd);

// 2. Leer JSON con productos
fetch('data1/productos.json')
    .then(response => response.json())
    .then(productos => {
        const producto = productos.find(p => p.id === idProd);

        if (!producto) {
            document.body.innerHTML = "<h2>Producto no encontrado</h2>";
            return;
        }

        // 3. Llenar HTML con los datos del producto
        document.getElementById("nombre-producto").textContent = producto.nombre;
        document.getElementById("precio-final").textContent = producto.precio + " €";
        document.getElementById("precio-original").textContent = producto.precioOriginal + " €";
        document.getElementById("descuento").textContent = "-" + producto.descuento + "%";

        document.getElementById("calificacion").textContent = producto.valoracion;
        document.getElementById("opiniones").textContent = producto.opiniones + " opiniones";
        document.querySelector(".stars").innerHTML = generarEstrellas(producto.valoracion);

        document.getElementById("Capacidad").textContent = producto.caracteristicas.disco;

        document.getElementById("imagen-principal").src = producto.imagen;

        // 4. Galería (solo si existe en JSON)
        const galeria = document.querySelector(".galeria");
        galeria.innerHTML = ""; // limpiar imágenes anteriores
        if (producto.galeria) {
            producto.galeria.forEach(img => {
                const mini = document.createElement("img");
                mini.src = img;
                mini.alt = producto.nombre;
                mini.addEventListener("click", () => {
                    document.getElementById("imagen-principal").src = img;
                });
                galeria.appendChild(mini);
            });
        } else {
            // si no hay galería, solo ponemos la imagen principal
            const mini = document.createElement("img");
            mini.src = producto.imagen;
            mini.alt = producto.nombre;
            galeria.appendChild(mini);
        }
    })
    .catch(error => console.error("Error cargando producto:", error));
</script>

</body>
</html>

